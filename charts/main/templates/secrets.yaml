apiVersion: v1
kind: Secret
metadata:
  name: phoenixchartmain-oauth2-secrets
  labels:
    app: phoenixchartmain-oauth2
    release: "phoenixchartmain"
type: Opaque
stringData:
    # This can be generated with
    # openssl rand -base64 24
    cookie-secret: "<SET>"
    # Should be from the client
    client-secret: "<SET>"
    client-id: "<SET>"
---
apiVersion: v1
kind: Secret
metadata:
  name: phoenix-platform-db-secret
  labels:
    app: phoenix-platform-db
    release: "phoenixchartmain"
type: Opaque
stringData:
    username: "phiphi"
    password: "<SET>"
    postgres-password: "<SET>"
    database: "platform"
---
apiVersion: v1
kind: Secret
metadata:
  name: phoenix-api-secret
  labels:
    app: phoenix-api
    release: "phoenixchartmain"
type: Opaque
stringData:
  # These values must match a number of things in the chart:
  #
  # - PASS SET must match `db_password` in the platform-db-secret or the external db.
  # - ://postgres: is the user name and must match the db_user in the
  # platform-db-secret or the external db.
  # - @phoenixchartmain-platformdb:5432 is the host and
  # port of the db. It must match the `release name`-platformdb in the
  # - /platform is the db name and must match the.
  # - db_name in the platform-db-secret or the external db
  SQLALCHEMY_DATABASE_URI: "postgresql+psycopg://postgres:<PASS SET>@phoenixchartmain-platformdb:5432/platform"
  # This is needed for the app to run but is not used in the app
  # It should be refactored so that the app can start with out it or with False
  SQLALCHEMY_DATABASE_URI: "postgresql+psycopg://postgres:<PASS SET>@phoenixchartmain-platformdb:5432/platform_testing"
