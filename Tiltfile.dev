# Tilefile for phoenix
print("Phoenix TiltFile is being evaluated")
load('ext://namespace', 'namespace_create')

allow_k8s_contexts(os.getenv('KUBE_DEV_CONTEXT'))
namespace_create(os.getenv('DEV_NAMESPACE'))

k8s_yaml('clusters/dev/secrets.yaml')

k8s_yaml(helm(
  './charts/main/',
  name='phoenixchartmain',
  namespace=os.getenv('DEV_NAMESPACE'),
  values='./clusters/dev/values.yaml',
))
